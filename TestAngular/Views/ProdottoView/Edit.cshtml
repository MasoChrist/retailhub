@using System.Drawing
@model DataObjects.DTOProdotto
@using System.ComponentModel
@using DataObjects

@using GridMvc.Html

    
    <div class="form-horizontal">
        <h4>@if(Model == null)
            {<text>Nuovo Prodotto</text>}
        else
        
            {<text>Modifica Prodotto</text>}
            
        </h4>
        <hr />
       
        <div class="form-group">
          <br>Descrizione<br/>
            <div class="col-md-10">
                @Html.TextBoxFor(model => model.Descrizione, new { id ="Descrizione"} )
                @Html.ValidationMessageFor(model => model.Descrizione, "", new { @class = "text-danger" })
            </div>
        </div>

        <div class="form-group">
            <br>Descrizione Breve<br />
            <div class="col-md-10">
                @Html.TextBoxFor(model => model.DescrizioneBreve , new {id ="DescrizioneBreve"}) 
                @Html.ValidationMessageFor(model => model.DescrizioneBreve, "", new { @class = "text-danger" })
            </div>
        </div>
        <button onclick="Save()">Salva</button>
    </div>




<script type="text/javascript" src="../../Scripts/ProdottoView/ProdottoController.js"></script>
<script type="text/javascript" src="../../Scripts/Core/Core.js"></script>

<script type ="text/javascript">
    Save = function () {
        @{
            var id = new Guid();
            if (Model != null)
            {
                id = Model.ID;
            }
          
        }
        var id = @id;
        var dto = {
            ID: id,
            Descrizione : document.getElementById("Descrizione").value,
            DescrizioneBreve: document.getElementById("DescrizioneBreve").value
        };
        prodotti.UpdateOrInsert(
            dto

        );

    }


</script>